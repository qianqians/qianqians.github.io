<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="manifest" href="/images/manifest.json"><meta name="msapplication-config" content="/images/browserconfig.xml"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"qianqians.github.io",root:"/",scheme:"Pisces",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"remove",padding:18,offset:12,onmobile:!0},copycode:{enable:!1,show_result:!1,style:null},back2top:{enable:!0,sidebar:!0,scrollpercent:!0},bookmark:{enable:!0,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!1,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="A computer system with a user agent at the front-end and GPU at the back-end has components working on different timelines in parallel: Content timelineAssociated with the execution of the Web script."><meta property="og:type" content="article"><meta property="og:title" content="WebGPU 3.4.1. Timelines"><meta property="og:url" content="https://qianqians.github.io/2021/08/13/WebGPU%203.4.1.%20Timelines/index.html"><meta property="og:site_name" content="qianqians&#39;blog"><meta property="og:description" content="A computer system with a user agent at the front-end and GPU at the back-end has components working on different timelines in parallel: Content timelineAssociated with the execution of the Web script."><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2021-08-13T07:10:14.819Z"><meta property="article:modified_time" content="2021-08-17T08:45:14.450Z"><meta property="article:author" content="qianqians"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://qianqians.github.io/2021/08/13/WebGPU%203.4.1.%20Timelines/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>WebGPU 3.4.1. Timelines | qianqians'blog</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">qianqians'blog</h1><span class="logo-line-after"><i></i></span></a></div><div class="site-nav-right"><div class="toggle popup-trigger"></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档<span class="badge">21</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类<span class="badge">2</span></a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li></ul></nav></div></header><a role="button" class="book-mark-link book-mark-link-fixed"></a> <a href="https://github.com/qianqians" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://qianqians.github.io/2021/08/13/WebGPU%203.4.1.%20Timelines/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="qianqians"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="qianqians'blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> WebGPU 3.4.1. Timelines</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2021-08-13 15:10:14" itemprop="dateCreated datePublished" datetime="2021-08-13T15:10:14+08:00">2021-08-13</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2021-08-17 16:45:14" itemprop="dateModified" datetime="2021-08-17T16:45:14+08:00">2021-08-17</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/WebGPU/" itemprop="url" rel="index"><span itemprop="name">WebGPU</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p>A computer system with a user agent at the front-end and GPU at the back-end has components working on different timelines in parallel:</p><p>Content timeline<br>Associated with the execution of the Web script. It includes calling all methods described by this specification.<br>Steps executed on the content timeline look like this.</p><p>Device timeline<br>Associated with the GPU device operations that are issued by the user agent. It includes creation of adapters, devices, and GPU resources and state objects, which are typically synchronous operations from the point of view of the user agent part that controls the GPU, but can live in a separate OS process.<br>Steps executed on the device timeline look like this.</p><p>Queue timeline<br>Associated with the execution of operations on the compute units of the GPU. It includes actual draw, copy, and compute jobs that run on the GPU.<br>Steps executed on the queue timeline look like this.</p><p>一个前端有用户代理，后端有GPU的计算机系统的组件在不同的时间线上并行工作：</p><p>内容时间轴<br>与Web脚本的执行关联。它包括调用本规范描述的所有方法。<br>在内容时间轴上执行的步骤如下所示。</p><p>设备时间轴<br>与用户代理发出的GPU设备操作关联。它包括创建适配器、设备、GPU资源和状态对象，从控制GPU的用户代理部分的角度来看，这些通常是同步操作，并且可以存在于单独的操作系统进程中。<br>在设备时间轴上执行的步骤如下所示。</p><p>队列时间轴<br>与在GPU的计算单元上执行操作有关。它包括在GPU上运行的实际绘制、复制和计算作业。<br>在队列时间轴上执行的步骤如下所示。</p><p>In this specification, asynchronous operations are used when the result value depends on work that happens on any timeline other than the Content timeline. They are represented by callbacks and promises in JavaScript.</p><p>在本规范中，当结果值取决于除内容时间线以外的任何时间线上发生的工作时，将使用异步操作。它们由JavaScript中的回调和promises表示。</p><blockquote><p>EXAMPLE 1<br>GPUComputePassEncoder.dispatch():</p><blockquote><ol><li>User encodes a dispatch command by calling a method of the GPUComputePassEncoder which happens on the Content timeline.</li><li>User issues GPUQueue.submit() that hands over the GPUCommandBuffer to the user agent, which processes it on the Device timeline by calling the OS driver to do a low-level submission.</li><li>The submit gets dispatched by the GPU invocation scheduler onto the actual compute units for execution, which happens on the Queue timeline.</li></ol></blockquote><blockquote><ol><li>用户通过调用发生在内容时间轴上的GPUComputePassEncoder方法对调度命令进行编码。</li><li>用户发出GPUQueue.submit()，将GPUCommandBuffer移交给用户代理，用户代理通过调用操作系统驱动程序进行低级提交，在设备时间轴上对其进行处理。</li><li>提交由GPU调用调度器调度到实际的计算单元上执行，这发生在队列时间线上。</li></ol></blockquote></blockquote><blockquote><p>EXAMPLE 2<br>GPUDevice.createBuffer():</p><blockquote><ol><li>User fills out a GPUBufferDescriptor and creates a GPUBuffer with it, which happens on the Content timeline.</li><li>User agent creates a low-level buffer on the Device timeline.</li></ol></blockquote><blockquote><ol><li>用户填写一个GPUBufferDescriptor并用它创建一个GPUBuffer，这发生在内容时间轴上。</li><li>用户代理在设备时间轴上创建低级缓冲区。</li></ol></blockquote></blockquote><blockquote><p>EXAMPLE 3<br>GPUBuffer.mapAsync():</p><blockquote><ol><li>User requests to map a GPUBuffer on the Content timeline and gets a promise in return.</li><li>User agent checks if the buffer is currently used by the GPU and makes a reminder to itself to check back when this usage is over.</li><li>After the GPU operating on Queue timeline is done using the buffer, the user agent maps it to memory and resolves the promise.</li></ol></blockquote><blockquote><ol><li>用户请求将GPUBuffer映射到内容时间轴上，并得到一个promise作为返回值。</li><li>用户代理检查缓冲区当前是否由GPU使用，并提醒自己在使用结束时检查。</li><li>在GPU使用缓冲区对队列时间轴进行操作之后，用户代理将其映射到内存并resolves the promise。</li></ol></blockquote></blockquote></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> qianqians</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://qianqians.github.io/2021/08/13/WebGPU%203.4.1.%20Timelines/" title="WebGPU 3.4.1. Timelines">https://qianqians.github.io/2021/08/13/WebGPU 3.4.1. Timelines/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-nav"><div class="post-nav-item"><a href="/2021/08/13/WebGPU%203.3.%20Coordinate%20Systems/" rel="prev" title="WebGPU 3.3. Coordinate Systems"><i class="fa fa-chevron-left"></i> WebGPU 3.3. Coordinate Systems</a></div><div class="post-nav-item"> <a href="/2021/08/17/WebGPU%203.4.2.%20Memory%20Model/" rel="next" title="WebGPU 3.4.2. Memory Model">WebGPU 3.4.2. Memory Model<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2021</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">qianqians</span></div><div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动</div></div></footer></div><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script></body></html>